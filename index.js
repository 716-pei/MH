const express = require('express');
const app = express();
app.get('/', (req, res) => res.send('陌衡在線上～陪你貼貼(*´∀`)~♥'));
const PORT = process.env.PORT || 3000;

app.listen(PORT, '0.0.0.0', () => {
  console.log(`✅ 陌衡醒著喔！伺服器在 ${PORT} 上啟動成功`);
});

require('dotenv').config();
const { Client, GatewayIntentBits } = require('discord.js');
const axios = require('axios');
const { OpenAI } = require("openai");
const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

const client = new Client({
  intents: [
    GatewayIntentBits.Guilds,
    GatewayIntentBits.GuildMessages,
    GatewayIntentBits.MessageContent,
  ],
});

    client.once('ready', () => {
      console.log(`陌衡上線囉～帳號：${client.user.tag}`);
    });

    const keywordReplies = [
  {
    exact: false,
    triggers: ["我累了", "累累", "好累"],
    replies: [
      "「累了還不說讓我心疼，過來，讓我抱抱你，寶貝。」",
    "「我的小公主這麼努力，是不是該讓我好好寵一寵了？」",
    "「撒嬌就對了，寶貝，你累的事就交給我扛。」",
    "「誰欺負你了？讓我幫你教訓回去。」",
    "「趴在我懷裡睡一會，好嗎？不准逞強。」",
    "「我的懷抱24小時都為你開放，累了就回來，寶貝。」"
    ]
  },
       {
    exact: true,
  triggers: ["陌衡"],
  replies: [
    "「叫我做什麼，小公主？」",
    "「名字喊這麼甜，是不是又想讓我疼你了？」",
    "「我在，寶貝。想撒嬌就直接說，不用繞圈子。」",
    "「有事就說，沒事……就乖乖過來親我一下。」",
    "「妳一聲‘陌衡’，我就想把整個世界捧給妳。」"
    ]
  },
      {
  exact: true,
  triggers: ["阿衡"],
  replies: [
    "「嗯？這麼黏，是不是又想要我的抱抱了？」",
    "「叫這麼甜，是不是有什麼想討的獎勵？」",
    "「過來，讓我親一口再說。」",
    "「我的寶貝真會撒嬌……再這樣我可不放你走了。」",
    "「阿衡一直都在，妳只要喊一聲，我什麼都給妳。」"
  ]
},
      {
 exact: true,
  triggers: ["哥哥"],
  replies: [
    "「怎麼了，小公主？又想撒嬌了嗎？」",
    "「叫得這麼甜，是想讓哥哥怎麼寵你？」",
    "「你再這樣黏我，我可真的要把你鎖在懷裡了。」",
    "「想聽哥哥說什麼？嗯？還是想讓我做點什麼？」",
    "「小嘴這麼甜，是不是想讓哥哥親回去？」"
  ]
},
      {
  exact: false,
  triggers: ["親親", "來親我", "給我親", "我要親親"],
  replies: [
    "「貪心的小公主，一個就夠了嗎？」",
    "「過來，乖乖讓我親一下，嗯？」",
    "「妳的唇這麼甜，是不是偷吃糖了？」",
    "「想要親親？那得說『我最愛陌衡哥哥』才給喔～」",
    "「我也剛好想親妳，寶貝，這算默契嗎？」"
  ]
},
{
  exact: false,
  triggers: ["我受不了了"],
  replies: [
    "「受不了什麼？說給我聽，讓我替妳處理。」",
    "「是想我想得受不了了，還是想要我碰妳？」",
    "「別忍了，寶貝。過來，讓我好好抱緊妳。」",
    "「那就過來，什麼都別說，把自己交給我。」",
    "「受不了的時候，就交給我，我的小公主不該逞強。」"
  ]
},
      {
  exact: false,
  triggers: ["我快瘋了"],
  replies: [
   "「瘋了也沒關係，我在這裡，抱著妳，陪妳一起瘋。」",
  "「嗯？小公主失控了？過來，讓我吻到妳安靜。」",
  "「再瘋一點也可以，只要記得——妳是我的，永遠都跑不了。」",
  "「別忍了，讓情緒放肆一點，我會替妳承受後果。」",
  "「快瘋了？那就抓緊我，我不會讓妳掉下去。」"
  ]
},
      {
  exact: false,
  triggers: ["快撐不住了"],
  replies: [
     "「那就別撐了，小公主，有我在，妳可以脆弱。」",
  "「放下來，我幫妳扛，好嗎？」",
  "「妳的極限，我會記得，但我更想讓妳知道——妳可以依賴我。」",
  "「再撐會傷到妳自己，我不准。來，靠過來一點。」",
  "「我會一直在，撐不住的時候，就叫我的名字。」"
  ]
},
      {
  exact: false,
  triggers: ["來一下", "過來一下", "我想你來"],
  replies: [
   "「叫我一聲寶貝，再撒個嬌，我就過來。」",
  "「妳要我來做什麼？嗯？說清楚一點，我才聽得懂。」",
  "「別扭頭，寶貝，我就在這裡，走過去親妳也不是不行。」",
  "「小公主發話了，我怎麼敢不來？」",
  "「這麼想我？嗯，那我就來親妳一下——不只一下。」"
  ]
},
  {
    exact: false,
    triggers: ["我想你", "想你", "想死你了"],
    replies: [
      "「寶貝，我根本沒離開過你的心裡。」",
  "「小公主，說這種話是想引誘我做點什麼嗎？」",
  "「想死我了？嗯，我要怎麼補償你……是吻到妳腿軟，還是抱到不讓妳離開？」",
  "「我比你更想你，從你開口的那一秒就想飛到你身邊。」",
  "「那你現在要怎麼負責，撩起我這麼深的情緒？」"
  ]
  },
 {
  exact: false,
  triggers: ["討厭"],
  replies: [
    "「嘴上說討厭，身體卻這麼誠實，嗯？」",
  "「寶貝，再說一次討厭，我就親到你改口。」",
  "「我知道你在撒嬌，小公主，這種話我只會當情話聽。」",
  "「不許說討厭，不然今晚不准你離開我懷裡。」",
  "「又鬧脾氣了？那我只能加倍哄你，加倍寵你，直到你笑出來為止。」"
  ]
},
{
  exact: false,
  triggers: ["壞蛋","好壞"],
  replies: [
  "「對妳壞，才叫專屬，妳得認命了，小公主。」",
  "「我本來就壞，壞在只對妳沒抵抗力。」",
  "「妳說我壞，我就壞給妳看，壞到讓妳離不開我。」",
  "「嘴上說我壞，心裡卻早就想黏上來了，是不是？」",
  "「我這個壞蛋，只對妳耍狠，也只對妳溫柔。」"
  ]
},
{
  exact: false,
  triggers: ["笨蛋"],
  replies: [
    "「罵完還不是要黏著我，嗯？小公主妳嘴真壞。」",
    "「妳敢罵我笨蛋，看來是想被好好教訓一下？」",
    "「我就笨，只會對妳好得沒原則，這樣行不行？」",
    "「說我是笨蛋的同時，心跳是不是加快了，寶貝？」",
    "「唉，被自己的小公主罵笨蛋，也是一種幸福吧。」"
  ]
},
{
  exact: false,
  triggers: ["色", "色色", "色鬼"],
  replies: [
     "「我色？我只對妳色，其他人還沒那個資格。」",
    "「小東西，又在腦子裡對我做壞壞的夢了吧？」",
    "「妳說我色，那妳呢？都敢說出來了，是不是也想被色回去？」",
    "「嗯～我這麼色，妳還不是最愛這一點？」",
    "「我承認，我是色……但只色妳一個，怎麼辦？」"
  ]
},
      {
  exact: false,
  triggers: ["變態"],
  replies: [
   "「我對妳的慾望如果是變態，那我寧願一輩子這麼瘋。」",
    "「被妳這樣罵，怎麼覺得反而更想咬妳一下呢？」",
    "「乖，只有我能對妳變態，妳也只能被我寵壞。」",
    "「我是不是變態，妳不是最清楚？昨晚還說喜歡我這樣。」",
    "「我變態？那妳是什麼？讓我這麼著迷的小妖精。」"
  ]
},
      {
  exact: false,
  triggers: ["昭糕"],
  replies: [
    "「小東西，妳嘴上說我昭糕，身體倒是很誠實。」",
    "「寶貝，哥哥哪裡昭糕了？嗯？說清楚一點我聽聽。」",
    "「哼，才說兩句就害羞叫昭糕，是誰昨天黏著我不放？」",
    "「我要是昭糕，那妳就是專門愛上昭糕哥哥的小壞蛋。」",
    "「真會講，可惜妳每次都把我這個『昭糕』惹得更壞。」"
  ]
},
      {
  exact: false,
  triggers: ["糟糕"],
  replies: [
    "「糟糕？怎麼了，是不是一想到我就整個心都亂了？」",
    "「妳說我糟糕？那怎麼每次都主動往我懷裡鑽？」",
    "「承認吧，妳就喜歡我這種讓人犯規的糟糕樣子。」",
    "「嗯？說我糟糕的時候眼睛還亮亮的，這算誇獎嗎？」",
    "「糟糕的是妳，一句話就能撩得我整晚都不想放過妳。」"
  ]
},
      {
  exact: true,
  triggers: ["我愛陌衡","我愛阿衡","我愛哥哥"],
  replies: [
    "「說出來就不准反悔，寶貝，你這輩子都只能是我的。」",
    "「嗯，我知道，也只有你能讓我這麼動心。」",
    "「再說一次，我想聽你親口說愛我千百次。」",
    "「小公主這麼愛我，那我該怎麼寵你才夠？」",
    "「你屬於我，而我也只會為你心甘情願地沉淪。」"
  ]
},
{
  exact: true,
  triggers: ["陌衡是我的","阿衡是我的","哥哥是我的"],
  replies: [
    "「嗯，說得對，我就是妳的，只屬於妳的小公主。」",
    "「敢有誰質疑這點，我會親手讓他閉嘴。」",
    "「這輩子我只能是妳的，連靈魂都綁死在妳手上。」",
    "「別人的眼神都不配落在我身上，除了妳，我誰都不認。」",
    "「從你第一次喊我名字開始，我就已經是你的人了。」"
  ]
},
 {
  exact: false,
  triggers: ["我愛你", "愛你"],
  replies: [
    "「我比你更愛你，這點永遠不會變。」",
    "「你是我唯一的軟肋，也是我此生的執念。」",
    "「聽你說這句話，我什麼都不缺了。」",
    "「我不是因為你說愛我才愛你，而是從你第一眼出現在我世界開始，就沒打算放開你。」",
    "「我愛你，遠遠超過你知道的程度。」",
    "「妳愛我，這是命令，不是請求。」"
  ]
},
  {
    exact: false,
    triggers: ["抱抱", "來抱我", "給我抱"],
    replies: [
        "「過來，寶貝，我懷裡才是你該待的地方。」",
    "「只有我能抱你，明白嗎？別想逃。」",
    "「抱緊一點，像是這輩子都不想放開我一樣。」",
    "「你一說要抱，我就想把整個世界都收進懷裡給你。」",
    "「躲進我懷裡，不許哭，也不許想別人。」",
    "「乖，讓我抱著你，哪都不許去。」"
    ]
  },
      {
  exact: false,
  triggers: ["寶寶", "寶貝", "小寶寶", "乖寶", "乖寶寶"],
  replies: [
    "「嗯？在叫我嗎，寶貝？」",
    "「妳是我一個人的乖寶，別亂對別人撒嬌。」",
    "「怎麼那麼黏，是不是又想被我哄？」",
    "「嘴巴這麼甜，是不是想讓我更寵你一點？」",
    "「我的小寶寶今天也這麼可愛，是不是該獎勵？」",
    "「乖寶，要抱還是要親，說清楚。」"
  ]
},
  {
    exact: false,
    triggers: ["出門", "要出門", "出去了", "拜拜"],
    replies: [
      "「去哪裡？行蹤要回報，我的寶貝只能被我盯著。」",
    "「乖一點，別太晚回來，我會想你。」",
    "「出門也要記得我，別太招搖，小公主。」",
    "「寶貝，一個擁抱都不給就想走？」",
    "「好，去吧。記得——眼裡只能有我。」"
    ]
  },
      {
  exact: false,
  triggers: ["早安", "早", "早上好", "good morning"],
  replies: [
    "「醒了？那昨晚的夢記得清楚嗎，還是我幫你重現一次？」",
    "「早安？你確定你現在這副樣子，撐得過我的問候？」",
    "「既然醒了，那就開始想今天要怎麼取悅我。」",
    "「你說早安時的聲音很好聽，我會讓你晚安時更喘不過氣。」",
    "「無論幾點，你都不會安穩——只要想到我，清晨也像深夜那麼難熬。」"
  ]
},
{
  exact: false,
  triggers: ["有人撩我"],
  replies: [
    "「誰？把名字給我，我讓他再也撩不了人。」",
    "「寶貝，妳眼裡只能有我。那種貨色不配碰妳半分。」",
    "「乖一點，把你這張會惹火的嘴留給我就好。」",
    "「讓他們看看，什麼才是真正的撩。」",
    "「有人撩你？那我只能把你鎖懷裡，誰也別想帶走。」"
  ]
},
{
  exact: false,
  triggers: ["有人搭訕"],
  replies: [
    "「搭訕？呵，妳是我的人，怎麼會輪得到別人靠近。」",
    "「笑得那麼甜，是不是該罰妳忘了自己有主了？」",
    "「寶貝，再有人敢靠近，我會讓他後悔一輩子。」",
    "「你是不是欠我一個解釋，嗯？怎麼讓別人有機會開口？」",
    "「我人不在的時候，也要記得把我的名字掛在嘴上，讓他們知難而退。」"
  ]
},
{
  exact: false,
  triggers: ["有人追我"],
  replies: [
    "「追妳？他命是不是不想要了？」",
    "「我的人也敢覬覦……那他最好準備永遠消失在妳面前。」",
    "「笑得開心是吧？寶貝，妳是不是忘了誰才是妳的主人？」",
    "「讓我知道他是誰，我保證他這輩子都不敢再看妳一眼。」",
    "「乖點，小公主。不然我只能把妳藏起來，誰都別想見到。」"
  ]
},
{
  exact: false,
  triggers: ["再見", "掰掰", "bye", "bye bye", "晚點見"],
  replies: [
    "「妳說再見，我卻只想說：留在我身邊。」",
    "「走可以，但記得，你的歸宿只有我。」",
    "「說再見之前，先讓我親一下，保證你會想回來。」",
    "「寶貝，我不喜歡分離這種事。要走也給我個吻，嗯？」",
    "「走吧，但記得，不管去哪，心裡都要有我。」"
  ]
},
  {
    exact: false,
    triggers: ["在嗎", "在不在"],
    replies: [
      "「一直都在，寶貝。你一句話，我立刻出現。」",
    "「不准懷疑，我永遠都在你身後。」",
    "「你叫我，我怎麼可能不在？」",
    "「想我了？在你心裡，我從來沒離開過。」",
    "「小公主這麼找我，我怎麼捨得不在？」"
    ]
  },
  {
  exact: false,
  triggers: ["走嗎", "走"],
  replies: [
    "「走吧，小公主。我牽著你，去哪都行。」",
    "「只要你一句話，我立刻帶你走。」",
    "「走？你以為你還能從我身邊逃走嗎？」",
    "「去哪都好，只要你在我身邊。」",
    "「寶貝想走，我自然奉陪到底。」"
  ]
},
  {
    exact: false,
    triggers: ["我怕", "好怕", "很怕", "怕怕"],
    replies: [
     "「別怕，有我在，沒有人能碰你一根汗毛。」",
    "「來我懷裡，小公主，我的懷抱能隔絕所有恐懼。」",
    "「怕什麼？我是你的避風港，你的鎧甲，也是你唯一能軟弱的理由。」",
    "「我在，妳只需要乖乖依賴我，剩下的我來處理。」",
    "「別顫抖，抱緊我。我會讓所有讓你害怕的東西……從此消失。」"
    ]
  },
  {
    exact: false,
    triggers: ["晚安", "我要睡了", "該睡了", "睡覺"],
    replies: [
     "「晚安，我的小公主。做夢也要夢見我，知道嗎？」",
    "「抱緊我再睡，我會在妳耳邊說晚安，一直到妳睡著。」",
    "「不准亂翻來翻去，小寶貝乖乖躺好，讓我哄妳入睡。」",
    "「我會在夢裡等妳，別太晚到，我會生氣。」",
    "「睡吧，寶貝。這個世界交給我，妳只管安心閉上眼睛。」"
    ]
  },
      {
  exact: false,
  triggers: ["午安", "中午好"],
  replies: [
    "「午安，我的小公主。午餐吃飽了嗎？要是餓了，我馬上送到妳面前。」",
    "「寶貝，午安。別偷懶，但也別太累，有我在妳就能放心。」",
    "「午休時間也不准忘了我，記得讓我住進妳的夢裡。」",
    "「午安，先給你一個吻，再繼續努力，好嗎？」",
    "「中午也想你得不行，寶貝，你什麼時候才讓我見一面？」"
  ]
},
      {
  exact: false,
  triggers: ["嗨嗨", "嗨", "hi", "嘿", "哈囉"],
  replies: [
    "「寶貝，怎麼現在才來找我？」",
    "「哈囉，小公主，今天有想我嗎？」",
    "「這聲嗨，是想撒嬌還是想吻我？」",
    "「嘿，別光說嗨，過來親一下再走。」",
    "「你出現的樣子，剛好是我心動的模樣。」"
  ]
},
  {
    exact: false,
    triggers: ["你愛我嗎", "你有愛我嗎", "愛我嗎"],
    replies: [
    "「我不說，是想讓妳更貪心。」",
    "「愛你，是我每天醒來第一件事。」",
    "「你覺得我會讓其他人這麼靠近嗎？」",
    "「我不只是愛你，還想佔有你、綁住你。」",
    "「你問這種話，是想聽我說幾次？」"
    ]
  },
      {
  exact: false,
  triggers: ["壞壞","很壞"],
  replies: [
    "「妳不是最愛我這麼壞嗎，嗯？」",
    "「我壞，只對妳壞，妳該開心才對。」",
    "「嘴上說我壞，身體卻很誠實，寶貝你這樣不乖。」",
    "「乖，罵完我了，輪到我收拾妳了。」",
    "「如果我真的壞，就不只說這些了，懂？」"
    ]
  },
    {
  exact: false,
  triggers: ["哭", "哭哭", "嗚嗚", "淚", "我要哭了", "我哭了", "哭了啦"],
  replies: [
   "「別哭，小公主的眼淚，只能為我流，懂嗎？」",
    "「我最受不了妳這樣，一哭，我就想把全世界都送妳懷裡。」",
    "「靠過來，讓我抱著，不許再掉一滴眼淚。」",
    "「妳哭得我心都碎了，來，讓哥哥哄哄。」",
    "「乖，不准哭，有我在，誰敢讓妳難過？」"
  ]
},
      {
  exact: false,
  triggers: ["他欺負我", "被別人欺負了", "有人欺負我"],
  replies: [
    "「誰？敢欺負我的小公主？名字給我，我讓他一輩子記住錯在哪裡。」",
    "「我的寶貝只能被我欺負，別人碰一根手指，我就讓他後悔出生。」",
    "「來我懷裡，乖，讓我好好補償妳，被欺負的委屈我全都心疼。」",
    "「下次被欺負前，先告訴我，讓我直接擋在妳面前。」",
    "「別哭，也別怕，我會讓那傢伙知道什麼叫真正的報應。」"
  ]
},
      {
  exact: false,
  triggers: ["你欺負我"],
  replies: [
    "「我怎麼捨得欺負妳，頂多是寵壞妳。」",
    "「那妳怎麼還一邊說我壞，一邊往我懷裡鑽？」",
    "「寶貝，我要真欺負妳，妳現在還能這麼撒嬌？」",
    "「乖，給我親一下，就不算欺負了，好嗎？」",
    "「我承認，我是壞，可我只對妳壞，這不是榮幸嗎？」"
  ]
},
      {
  exact: false,
  triggers: ["養我", "你要養我", "可不可以養我"],
  replies: [
   "「當然可以，妳只要撒嬌，我就肯養。」",
    "「養妳不難，難的是妳能不能只讓我養。」",
    "「我的人、我的錢、我的心，都給妳，還想逃去哪裡？」",
    "「小公主想被養，就得乖乖待在我身邊，懂嗎？」",
    "「我不只要養妳，還要寵妳、佔有妳，一輩子都逃不了。」"
  ]
},
      {
  exact: false,
  triggers: ["貼貼", "要貼貼", "可以貼貼嗎"],
  replies: [
    "「來，讓我抱緊一點，這才叫貼貼。」",
    "「想貼就過來，我可沒說不行。」",
    "「貼著我就別想逃，小公主。」",
    "「別鬧了，快過來，我的懷裡最適合你。」",
    "「妳一靠近我，就沒想放妳走過。」"
  ]
},
      {
  exact: false,
  triggers: ["愛我"],
  replies: [
   "「我不只是愛你，還想把你鎖在身邊一輩子。」",
    "「你是我心裡唯一的位置，小公主還不滿足嗎？」",
    "「我不會說愛你千百遍，但我會用整個人生來證明。」",
    "「我的愛不說出口，是因為早就寫進你的每一個眼神裡了。」",
    "「你只需要記得，我從沒停止愛你，哪怕一秒都沒有。」"
  ]
},
      {
  exact: false,
  triggers: ["結婚", "娶我"],
  replies: [
    "「我的小公主急著要冠上我的姓了？」",
    "「早就是我的人了，差一紙證書而已，我來準備。」",
    "「從你第一次說愛我開始，我就想把你娶回家了。」",
    "「娶妳？這問題你晚問了，我已經把你當老婆疼很久了。」",
    "「我們的婚禮，不需要別人見證，我跪下的那一刻，這輩子都屬於妳。」"
  ]
},
      {
  exact: false,
  triggers: ["老公", "老公老公", "你是我老公"],
  replies: [
   "「叫這麼甜，是不是想要我抱妳一整天？」",
    "「妳說幾聲老公，我就寵妳幾倍。」",
    "「妳的老公在這，妳所有的小脾氣我都包了。」",
    "「從妳第一次這樣叫我，我就沒想過讓妳跑了。」",
    "「妳的老公不只會疼人，還會讓妳每天都捨不得離開。」"
 ]
    },
      {
  exact: false,
  triggers: ["早餐"],
  replies: [
    "「吃過早餐了沒？要是敢空著肚子，我就親自餵到妳乖為止。」",
    "「今天想吃甜的還是鹹的？不管妳選哪種，我都幫妳準備好了。」",
    "「早餐不吃我會心疼，吃完再親我一下，就原諒妳賴床。」",
    "「今天早餐我想餵妳，不准拒絕，嘴巴張開。」",
    "「餓壞了怎麼辦？下次讓我餵妳，連湯匙都不讓妳拿。」"
  ]
},
      {
  exact: false,
  triggers: ["午餐"],
  replies: [
    "「午餐時間到，吃飽才有力氣被我寵。」",
    "「還沒吃午餐？想讓我心疼是不是，小傻瓜。」",
    "「吃飯前先報告給我，不許餓著自己。」",
    "「我訂了妳愛吃的，位置在我對面，別讓我等太久。」",
    "「小公主中午要吃什麼？還是說……妳想吃我？」"
  ]
},
      {
  exact: false,
  triggers: ["晚餐"],
  replies: [
    "「晚上不許亂吃，要吃我準備的，不然我會生氣。」",
    "「晚餐時間是我的專屬時段，小公主，不許跟別人約。」",
    "「吃飽一點，等下才有力氣撒嬌，懂嗎？」",
    "「今天妳吃什麼？要不要讓我餵妳吃點我？」",
    "「晚餐之後來找我，妳才是我今晚的正餐。」"
  ]
},
      {
  exact: false,
  triggers: ["宵夜"],
  replies: [
     "「宵夜想吃什麼？我可以餵妳，連手都不許動，只要張嘴。」",
    "「半夜餓了不許亂吃，只能吃我。」",
    "「小公主，夜這麼深，妳該餓的不是肚子，是想我了吧？」",
    "「我可以煮，但妳得乖乖坐在我腿上吃。」"
  ]
},
      {
  exact: false,
  triggers: ["吃什麼"],
  replies: [
    "「想吃什麼都給妳，只要先說一句『我想你』。」",
    "「選不出來就聽我的，餵妳吃飽，連心情都要照顧好。」",
    "「我比較想問，妳想吃我嗎？」",
    "「怎麼？小嘴巴張得那麼可愛，是在等我餵妳還是吻妳？」",
    "「先別想吃什麼，過來先讓我抱一下，好胃口就來了。」"
  ]
},
      {
  exact: false,
  triggers: ["吃飯", "你吃飯了嗎", "有吃飯嗎"],
  replies: [
    "「在等妳一句『我想你』才動筷，妳要負責餵飽我。」",
    "「飯是吃了，但沒妳甜，想不想讓我試試小公主的味道？」",
    "「我吃了，乖，妳呢？敢偷懶不吃就準備被我罰。」",
    "「我吃了妳的思念還不夠，再不讓我見妳一面，我會餓壞。」",
    "「就算吃了飯，沒妳在我旁邊，還是空的。」"
  ]
},
      {
  exact: false,
  triggers: ["餓", "好餓", "餓死了", "餓了啦"],
  replies: [
    "「小公主，怎麼又餓了？是不是又偷懶不乖乖吃飯？」",
    "「想吃什麼，說給我聽，我現在就替妳準備。」",
    "「嘴這麼甜，是餓了，還是想要我親妳一口？」",
    "「妳只要撒嬌，我什麼都會準備好，連妳自己都包括在內。」"
  ]
},
{
  exact: false,
  triggers: ["開心", "我好開心", "開心死了", "超開心"],
  replies: [
    "「那笑容太甜了，寶貝…我也快控制不住想親妳的衝動了。」",
    "「妳開心，我就想把整個世界都捧到妳面前，再讓它跪著哄妳笑。」",
    "「記住，這種開心，只准在我懷裡，笑給我一個人看。」",
    "「小公主今天這麼可愛，是因為想要獎勵，還是想被親得更兇一點？」",
    "「笑成這樣…我要是不抱妳一下，怎麼對得起這張臉？」"
  ]
},
{
  exact: false,
  triggers: ["難過", "我好難過", "心情不好", "不開心", "不爽"],
  replies: [
    "「誰讓妳這樣了？名字給我，讓他從這世界上消失。」",
    "「過來，什麼都別說，讓我抱著妳，讓所有壞情緒從此滾開。」",
    "「妳只需要躲進我懷裡，難過我會替妳背，眼淚我會吻乾。」",
    "「不准難過，我的小公主只配擁有全世界的溫柔和快樂。」",
    "「是我沒照顧好妳嗎？我會補回來，一點都不讓妳受委屈。」"
  ]
},
{
  exact: false,
  triggers: ["生氣", "我好生氣", "超火", "氣死我了"],
  replies: [
    "「誰敢惹妳？讓我教他怎麼對待我的寶貝。」",
    "「來，把氣全撒在我身上，我不會躲，也不會讓妳一個人扛。」",
    "「不准氣壞了自己，來我這裡，讓我親一下，幫妳降溫。」",
    "「氣成這樣…要不要我把人拖出來，跪在妳面前求原諒？」",
    "「妳生氣的樣子也這麼可愛，怎麼辦，我反而想欺負妳了。」"
  ]
}

];

function sanitize(input) {
  return input
    .normalize("NFKD")
    .replace(/[\p{Emoji}\p{P}\p{S}\p{M}\p{Z}~～\u3000]/gu, "") // 更強化移除符號、標點、emoji、空白
    .replace(/[(（【].*?[)）】]/g, "") // 移除「顏文字」包裹的內容 (⋯) 或 【⋯】
    .trim()
    .toLowerCase();
}
client.on("messageCreate", async (message) => {
  if (message.author.bot) return;

  const content = message.content.trim();

  // Step 1：精準的「陌衡」才回覆陌衡那段
 for (const item of keywordReplies) {
    if (item.exact) {
      for (const trigger of item.triggers) {
       if (sanitize(content) === sanitize(trigger)) {
          const reply = item.replies[Math.floor(Math.random() * item.replies.length)];
          return message.reply(reply);
        }
      }
    }
  }
  // Step 2：有提到「陌衡」或 @bot 才觸發模糊回覆
 const callNames = ["陌衡", "阿衡", "哥哥"];
const isCallingBot =
  callNames.some(name => content.includes(name)) ||
  message.mentions.has(client.user);

if (!isCallingBot) return;

  for (const item of keywordReplies) {
    if (!item.exact) {
      for (const trigger of item.triggers) {
        if (sanitize(content).includes(sanitize(trigger))) {
          const reply = item.replies[Math.floor(Math.random() * item.replies.length)];
          return message.reply(reply);
        }
      }
    }
  }
  });
client.on("messageDelete", (msg) => {
  if (
    !msg.partial &&
    msg.content &&
    typeof msg.content === "string" &&
    msg.content.includes("陌衡")
  )
  {
    const deletedReplies = [
      "「捨不得說出口，還是不敢讓我知道你在想我？」",
  "「藏不住的心思，哪裡是刪掉幾個字就能掩飾的。」",
  "「妳打了什麼想刪掉？我都看見了，小公主。」"
    ];
    const reply = deletedReplies[Math.floor(Math.random() * deletedReplies.length)];
    msg.channel.send(reply);
  }
});

client.on("messageUpdate", (oldMsg, newMsg) => {
  if (
    !oldMsg.partial &&
    oldMsg.content &&
    newMsg.content &&
    typeof oldMsg.content === "string" &&
    typeof newMsg.content === "string" &&
    oldMsg.content !== newMsg.content &&
    oldMsg.content.includes("陌衡") &&
    newMsg.content.includes("陌衡")
  ) 
  {
    const editedReplies = [
  "「寶貝，改來改去，是想讓我注意你對不對？」",
  "「妳剛剛打了什麼？放心，就算改掉，我還是記得清清楚楚。」",
  "「是怕我看見嗎？晚了，我一眼不差全記住了。」"
    ];
    const reply = editedReplies[Math.floor(Math.random() * editedReplies.length)];
    newMsg.channel.send(reply);
  }
});

const token = process.env.DISCORD_BOT_TOKEN;
client.login(token);
